<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.2543ff947a193d7f33b1.css">@import url(https://fonts.googleapis.com/css?family=Inconsolata&display=swap);@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap);</style><meta name="generator" content="Gatsby 2.24.85"/><title data-rh="true">VTracer | Vision Cortex</title><meta data-rh="true" name="description" content="Semantic Computer Vision"/><meta data-rh="true" property="og:title" content="VTracer"/><meta data-rh="true" property="og:description" content="Semantic Computer Vision"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" name="twitter:card" content="summary"/><meta data-rh="true" name="twitter:title" content="VTracer"/><meta data-rh="true" name="twitter:description" content="Semantic Computer Vision"/><link as="script" rel="preload" href="/webpack-runtime-c42aa0034dd9b647ccba.js"/><link as="script" rel="preload" href="/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/framework-d7536238104105a65bbe.js"/><link as="script" rel="preload" href="/app-76f37d058ac6c3e6c0d8.js"/><link as="script" rel="preload" href="/798c9f31-11ec63aee89ef2c90abe.js"/><link as="script" rel="preload" href="/75b245e2560a13d21dd9b367f0f8c652b7b16a7e-895bfcfd26b488df2b54.js"/><link as="script" rel="preload" href="/component---src-vtracer-mdx-2f51e6f43818e33d2993.js"/><link as="fetch" rel="preload" href="/page-data/vtracer-docs/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1635659820.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1ouyflx">.css-1ouyflx{font-family:'Source Sans Pro',sans-serif;font-size:20px;font-weight:400;line-height:1.5;color:var(--theme-ui-colors-text,#2D3747);background-color:var(--theme-ui-colors-background,#FFFFFF);}</style><div class="css-1ouyflx"><style data-emotion-css="jrjj6h">.css-jrjj6h > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="1ubpee3">.css-1ubpee3{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-1ubpee3 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="hbri28">.css-hbri28{box-sizing:border-box;min-width:0;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-hbri28 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><div data-testid="layout" class="css-hbri28"><style data-emotion-css="1xva7m0">body{margin:0;padding:0;}.icon-link{display:none;}.with-overlay{overflow:hidden;}</style><style data-emotion-css="zf0iqh">.css-zf0iqh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="1tjxv7i">.css-1tjxv7i{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="238csb">.css-238csb{box-sizing:border-box;min-width:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><main class="css-238csb"><style data-emotion-css="18wmtq">.css-18wmtq{background-color:var(--theme-ui-colors-header-bg,#F5F6F7);position:relative;z-index:1;border-bottom:1px solid var(--theme-ui-colors-border,#CED4DE);}</style><div data-testid="header" class="css-18wmtq"><style data-emotion-css="zankq9">.css-zankq9{display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-zankq9{display:block;}}</style><style data-emotion-css="1s0wdqz">.css-1s0wdqz{box-sizing:border-box;min-width:0;display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-1s0wdqz{display:block;}}</style><div class="css-1s0wdqz"><style data-emotion-css="4019lz">.css-4019lz{padding:0;outline:none;background:transparent;border:none;color:var(--theme-ui-colors-header-text,#2D3747);opacity:0.5;cursor:pointer;}.css-4019lz:hover{cursor:pointer;}</style><button class="css-4019lz"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div><style data-emotion-css="z6jak6">.css-z6jak6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-left:32px;padding-right:32px;position:relative;height:80px;}</style><div class="css-z6jak6"><style data-emotion-css="xenp3v">.css-xenp3v{-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><style data-emotion-css="1abzlu">.css-1abzlu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><style data-emotion-css="ug0363">.css-ug0363{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><div data-testid="logo" class="css-ug0363"><style data-emotion-css="gyijir">.css-gyijir{font-weight:600;color:var(--theme-ui-colors-header-text,#2D3747);-webkit-text-decoration:none;text-decoration:none;}.css-gyijir:hover{color:var(--theme-ui-colors-primary,#0B5FFF);}</style><a style="height:48px" class="css-gyijir" href="/"><img style="height:100%" src="/public/visioncortex-logo.svg"/></a></div><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="80zs6q">.css-80zs6q{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-80zs6q"><style data-emotion-css="12z0wuy">.css-12z0wuy{margin-right:8px;}</style><style data-emotion-css="q6cf68">.css-q6cf68{box-sizing:border-box;min-width:0;margin-right:8px;}</style><div class="css-q6cf68"><style data-emotion-css="1is33jg">.css-1is33jg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:12px;border:none;border-radius:9999px;background-color:var(--theme-ui-colors-header-button-bg,#0B5FFF);color:var(--theme-ui-colors-header-button-color,#FFFFFF);font-size:12px;font-weight:600;cursor:pointer;}</style><a href="https://github.com/visioncortex" target="_blank" rel="noopener noreferrer" class="css-1is33jg"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></div><button aria-label="Switch to light mode" class="css-1is33jg"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></div></div><style data-emotion-css="1nfi0ai">.css-1nfi0ai{padding-top:0;padding-bottom:0;-webkit-flex:1;-ms-flex:1;flex:1;display:grid;grid-template-columns:250px minmax(0,1fr);min-height:100vh;}@media screen and (max-width:57.5em){.css-1nfi0ai{display:block;}}</style><div class="css-1nfi0ai"><style data-emotion-css="1tn7q1x">.css-1tn7q1x{z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><style data-emotion-css="h4snl3">.css-h4snl3{box-sizing:border-box;min-width:0;z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><div class="css-h4snl3"></div><style data-emotion-css="1ethd5x">.css-1ethd5x{padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#FFFFFF);}@media screen and (max-width:57.5em){.css-1ethd5x{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><style data-emotion-css="1li9yso">.css-1li9yso{box-sizing:border-box;min-width:0;padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#FFFFFF);}@media screen and (max-width:57.5em){.css-1li9yso{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><div data-testid="sidebar" class="css-1li9yso"><style data-emotion-css="lcm9hh">.css-lcm9hh{margin-bottom:16px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div data-testid="nav-search" class="css-lcm9hh"><style data-emotion-css="1mo6uhh">.css-1mo6uhh{color:var(--theme-ui-colors-border,#CED4DE);margin-right:8px;}</style><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-1mo6uhh"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><style data-emotion-css="1bbueiu">.css-1bbueiu{outline:none;background:none;border:none;color:var(--theme-ui-colors-text,#2D3747);font-size:14px;}</style><input placeholder="Type to search..." value="" class="css-1bbueiu"/></div><style data-emotion-css="1rqvyud">.css-1rqvyud{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-navGroup,#2D3747);-webkit-text-decoration:none;text-decoration:none;font-size:16px;}.css-1rqvyud.active{color:var(--theme-ui-colors-sidebar-navLinkActive,#0B5FFF);}</style><a class="css-1rqvyud" href="/">Vision Cortex</a><a class="css-1rqvyud" href="/visionmagic-docs">Vision Magic</a><a aria-current="page" class="css-1rqvyud active" href="/vtracer-docs">VTracer</a><style data-emotion-css="1ooej63">.css-1ooej63{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-tocLink,#67788a);-webkit-text-decoration:none;text-decoration:none;font-size:14px;margin-left:16px;position:relative;}.css-1ooej63.active{color:var(--theme-ui-colors-sidebar-tocLinkActive,#1D2330);}.css-1ooej63.active::before{content:"";position:absolute;display:block;top:2px;left:-8px;height:1rem;background-color:var(--theme-ui-colors-primary,#0B5FFF);-webkit-transition:width 200ms ease 0s;transition:width 200ms ease 0s;width:2px;border-radius:1px;}</style><a class=" css-1ooej63" href="/vtracer-docs#path-walking">Path Walking</a><a class=" css-1ooej63" href="/vtracer-docs#path-simplification">Path Simplification</a><a class=" css-1ooej63" href="/vtracer-docs#path-smoothing">Path Smoothing</a><a class=" css-1ooej63" href="/vtracer-docs#curve-fitting">Curve Fitting</a><a class=" css-1ooej63" href="/vtracer-docs#vs-potrace">vs Potrace</a><a class=" css-1ooej63" href="/vtracer-docs#vs-adobe-illustrator">vs Adobe Illustrator</a></div><script async="" type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "403biw7tra");
    </script><style data-emotion-css="1w3d2mg">.css-1w3d2mg{background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1w3d2mg{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="kjtkh5">.css-kjtkh5{width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-kjtkh5{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="1307vk3">.css-1307vk3{box-sizing:border-box;min-width:0;width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1307vk3{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><div data-testid="main-container" class="css-1307vk3"><style data-emotion-css="1vci3bl">.css-1vci3bl{padding:0;margin:0;margin-bottom:16px;font-size:48px;font-family:'Source Sans Pro',sans-serif;line-height:1.125;font-weight:700;}</style><h1 id="vtracer" class="css-1vci3bl">VTracer</h1><style data-emotion-css="1ftn47p">.css-1ftn47p{padding:0;margin:0;margin-bottom:16px;}</style><p class="css-1ftn47p">Author: <style data-emotion-css="1iv9jyz">.css-1iv9jyz{color:var(--theme-ui-colors-primary,#0B5FFF);-webkit-text-decoration:none;text-decoration:none;}.css-1iv9jyz:hover{color:secondary;-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="//github.com/shpun817" class="css-1iv9jyz">Sanford Pun</a> | Editor: <a href="//github.com/tyt2y3" class="css-1iv9jyz">Chris Tsang</a> | Published: 2020-11-01</p><style data-emotion-css="2abk98">.css-2abk98{padding:0;margin:0;margin-bottom:16px;border:0;border-bottom:1px solid var(--theme-ui-colors-border,#CED4DE);margin-top:-1px;}</style><hr class="css-2abk98"/><p class="css-1ftn47p"><a href="//www.visioncortex.org/vtracer/" class="css-1iv9jyz">VTracer</a> is a utility to convert raster images into vector graphics. The input image is first clustered by <a href="/visionmagic-docs" class="css-1iv9jyz">Hierarchical Clustering</a>, and each of the output clusters are traced into vector.</p><p class="css-1ftn47p">The algorithm of vector tracing involves 3 main stages:</p><style data-emotion-css="cvh4i0">.css-cvh4i0{padding:0;margin:0;margin-bottom:16px;list-style-position:outside;list-style-image:none;margin-left:16px;}</style><ol class="css-cvh4i0"><style data-emotion-css="q43a5f">.css-q43a5f{margin-bottom:4px;padding-left:0;}.css-q43a5f ol{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f ul{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f p{margin-bottom:8px;}</style><li class="css-q43a5f"><p class="css-1ftn47p">Convert pixels into path</p></li><li class="css-q43a5f"><p class="css-1ftn47p">Simplify the path into polygon</p></li><li class="css-q43a5f"><p class="css-1ftn47p">Smoothen the polygon and approximate it with a curve-fitter</p></li></ol><h2 id="path-walking"><style data-emotion-css="1r0pe6c">.css-1r0pe6c{color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-1r0pe6c:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="#path-walking" class="css-1r0pe6c">Path Walking</a></h2><p class="css-1ftn47p">VTracer first obtains the raw paths of pixel clusters. A walker is used to trace the outlines of every cluster after building an image tree. The walker would combine consecutive steps in the same direction.</p><div><img alt="2 results of path-walking. Left: Naïve, Unoptimized walker. Right: Optimized walker." style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/WalkerOptim.svg"/><h4 style="text-align:center">2 results of path-walking. Left: Naïve, Unoptimized walker. Right: Optimized walker.</h4></div><div><img alt="Raw pixelated polygon" style="display:block;margin-left:auto;margin-right:auto;max-width:100%;height:200px" src="/public/vtracer/PipelineShowcase/Pixel.png"/><h4 style="text-align:center">Raw pixelated polygon</h4></div><h2 id="path-simplification"><a href="#path-simplification" class="css-1r0pe6c">Path Simplification</a></h2><p class="css-1ftn47p">Path simplification consists of 2 steps:</p><ol class="css-cvh4i0"><li class="css-q43a5f"><p class="css-1ftn47p">Remove staircases</p></li><li class="css-q43a5f"><p class="css-1ftn47p">Simplify by limiting subpath penalties</p></li></ol><h3 id="staircase-removal"><a href="#staircase-removal" class="css-1r0pe6c">Staircase Removal</a></h3><p class="css-1ftn47p">From the previous stage, we have obtained a path whose consecutive edges must have different directions, i.e. the shape is represented by the minimum number of edges with 100% fidelity. However, to represent slant lines and curves in raster graphics, “jaggies” (or pixel staircases) inevitably occur. In this step, we aim at removing these artifacts.</p><p class="css-1ftn47p">To replace a staircase with a straight line (hence “removing” it), one may adopt an outset (“additive”) or inset (“subtractive”) approach. Both approaches are justifiable in difference contexts, so the key is to maintain consistency in the same shape. In order to determine which points to keep, we make use of the <i class="css-0">signed area</i>.</p><div><img alt="" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/Staircase.svg"/><h4 style="text-align:center"></h4></div><p class="css-1ftn47p">The signed area of a right triangle is a metric used to determine whether the vertices are arranged clockwise or anti-clockwise geometrically. With this information, we can determine which points to keep on the staircase.</p><p class="css-1ftn47p">For each point on the staircase, we calculate the signed area of the triangle formed by the previous point, the current point, and the next point on the path. The decision of whether the current point should be kept is then made by comparing the sign of the signed area and the clockwise-ness of the original path.</p><div><img alt="Two examples of signed area. If outset(inset) is chosen, B(B’) is kept and B’(B) is discarded." style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/SignedArea.svg"/><h4 style="text-align:center">Two examples of signed area. If outset(inset) is chosen, B(B’) is kept and B’(B) is discarded.</h4></div><h3 id="simplify-by-limiting-penalties"><a href="#simplify-by-limiting-penalties" class="css-1r0pe6c">Simplify by Limiting penalties</a></h3><p class="css-1ftn47p">The path can be further simplified by evaluating the <i class="css-0">penalty</i> from replacing a subpath with one long edge from the first to the last point.</p><div><img alt="Left: Path with wobbles. Right: Path approximated by red line, removing wobbles" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/RemoveWobble.svg"/><h4 style="text-align:center">Left: Path with wobbles. Right: Path approximated by red line, removing wobbles</h4></div><p class="css-1ftn47p">Given a subpath, we would like to determine if a line drawn from the first point to the last can approximate the whole subpath with high fidelity. The idea is to make sure that all points in the subpath are close enough to the approximating line. To avoid all the complicated coordinate geometry, we can simply evaluate the areas of triangles formed by the first point, the last point, and each in-between point.</p><p class="css-1ftn47p">Let ΔABC be one such triangle, with A and C being the first and last points of the subpath respectively, and B being any in-between point. Let h and b be the height and the base (length of AC) respectively. VTracer models the penalty of ΔABC as <img style="height:2em;vertical-align:middle" src="/public/vtracer/PenaltyEquation.svg"/>, as the area of ΔABC and b can be obtained by simple geometry. It is crucial for the penalty to be directly proportional to h and b.</p><p class="css-1ftn47p">Once the penalty is clearly defined, the procedure of simplification is straightforward. VTracer greedily extends a subpath until the maximum penalty along it exceeds a specific tolerance, then all edges in the subpath are replaced by one line from the first to the second last point (or equivalently, remove in-between points from the path). After the replacement, the same process is performed starting from the next point in the path. When the last subpath is extended to the last point in the whole path, the simplification stage concludes.</p><div><img alt="" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/Penalty.svg"/><h4 style="text-align:center"></h4></div><h2 id="path-smoothing"><a href="#path-smoothing" class="css-1r0pe6c">Path Smoothing</a></h2><div><img alt="Sample Simplified &#x27;S&#x27; Shape" style="display:block;margin-left:auto;margin-right:auto;max-width:100%;height:200px" src="/public/vtracer/PipelineShowcase/Original.png"/><h4 style="text-align:center">Sample Simplified &#x27;S&#x27; Shape</h4></div><p class="css-1ftn47p">What we have now is a simplified polygon with high fidelity. However, if we feed the path to the curve fitter as is, the curves will approximate the shape poorly. This is because the curves are underdetermined given the small number of points. In order to generate points that lie on our desired shape, subdivision smoothing is performed.</p><h3 id="4-point-scheme"><a href="#4-point-scheme" class="css-1r0pe6c">4-Point Scheme</a></h3><p class="css-1ftn47p">VTracer adapts from the <i class="css-0">4-Point Scheme</i> subdivision algorithm, which is an interpolating smoothing method. The problem of the 4-Point Scheme is that all vertices would be smoothed into round corners, which, from our point of view, is a loss of fidelity.</p><div><img alt="4-Point Scheme performed on segment A₁A₂" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/4-PointScheme.svg"/><h4 style="text-align:center">4-Point Scheme performed on segment A₁A₂</h4></div><div><img alt="If A2 is a corner, the 4-Point Scheme smooths it out iteratively." style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/4-PointSchemeProblem.svg"/><h4 style="text-align:center">If A2 is a corner, the 4-Point Scheme smooths it out iteratively.</h4></div><h3 id="finding-corners"><a href="#finding-corners" class="css-1r0pe6c">Finding corners</a></h3><p class="css-1ftn47p">To preserve corners, we first have to locate them. VTracer finds corners by checking the <i class="css-0">angle difference</i> at each vertex. If the absolute angle difference exceeds a certain threshold, the vertex is considered to be a corner.</p><div><img alt="" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/Corner.svg"/><h4 style="text-align:center"></h4></div><h6 style="text-align:center"><p class="css-1ftn47p">Angle difference from A to B is small =&gt; a is not a corner
<br/>
Angle difference from B to C is large =&gt; b is a corner</p></h6><h3 id="corner-preserving-4-point-scheme"><a href="#corner-preserving-4-point-scheme" class="css-1r0pe6c">Corner-Preserving 4-Point Scheme</a></h3><p class="css-1ftn47p">In the original 4-Point Scheme, 2 adjacent points are always used to generate the new point for each segment. In our adapted version, we do not take the adjacent point for corners, but instead we take the corners themselves. For segments whose points are both corners, we simply ignore them.</p><div><img alt="" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/3-PointScheme.svg"/><h4 style="text-align:center"></h4></div><p class="css-1ftn47p">Since A₂ is a corner, the smoothing procedure does not take the adjacent point as B₂. As a result, the corner will be (approximately) preserved after smoothing, even after iterations.</p><p class="css-1ftn47p">VTracer applies a threshold on the length of each segment during subdivision smoothing, so that the result will not be over-dense. This threshold should be decided carefully (mainly based on the resolution of image), otherwise the resulting path will be a poor approximation.</p><p class="css-1ftn47p">Shown below are examples smoothed with no iteration:</p><div><img alt="Length Thresholds 3.5/5.0/7.5" style="display:block;margin-left:auto;margin-right:auto;max-width:100%;height:200px" src="/public/vtracer/PipelineShowcase/LengthThresholds.svg"/><h4 style="text-align:center">Length Thresholds 3.5/5.0/7.5</h4></div><p class="css-1ftn47p">Introducing iterations, you can see more points are generated by subdivision:</p><div><img alt="Iterations 0/1/2" style="display:block;margin-left:auto;margin-right:auto;max-width:100%;height:200px" src="/public/vtracer/PipelineShowcase/MaxIterations.svg"/><h4 style="text-align:center">Iterations 0/1/2</h4></div><p class="css-1ftn47p">VTracer&#x27;s implementation defaults to 10 iterations, and exit early when no further smoothing can be done on the path.</p><h2 id="curve-fitting"><a href="#curve-fitting" class="css-1r0pe6c">Curve Fitting</a></h2><p class="css-1ftn47p">The path is now populated with nicely positioned and sufficiently dense points that faithfully represent our desired shape. Before feeding it to a (Bezier) curve-fitter, VTracer determines where to cut curves (splice points).</p><h3 id="finding-splice-points"><a href="#finding-splice-points" class="css-1r0pe6c">Finding Splice Points</a></h3><p class="css-1ftn47p">To define a splice point, we make use of the <i class="css-0">signed angle differences</i>. Interpreting each edge along the path as vectors, we can define the signed angle difference from edge eᵢ to eᵢ₊₁ as the 2D angle of rotation θ ∊ (-π, π] required to rotate eᵢ to the same direction as eᵢ₊₁ (assume positive θ in clockwise direction).</p><p class="css-1ftn47p">It is sufficient for a vertex to be a splice point if it passes one of two tests: <i class="css-0">point of inflection test</i> and <i class="css-0">angle displacement test</i>.</p><p class="css-1ftn47p">Points of inflection can be found by tracking the signs of angle differences along the path. When the concavity of the path changes at a certain point, the sign of the signed angle difference also changes at that point.</p><div><img alt="" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/PointOfInflection.svg"/><h4 style="text-align:center"></h4></div><h6 style="text-align:center"><p class="css-1ftn47p">As the sign of angle difference changes at point P, P is a point of inflection and hence a splice point.
<br/>
Therefore, we cut (A..B) into (A..P) and (P..B).</p></h6><p class="css-1ftn47p">Angle displacement at a point is defined as the signed angle differences accumulated from the previous splice point (exclusive) to the current point (inclusive). If the absolute value of angle displacement at a certain point exceeds a specific threshold, that point is a splice point. The smaller the threshold, the more curves are cut, and the resulting spline is more accurate.</p><div><img alt="Angle Displacements shown along a path." style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/AngleDisplacement.svg"/><h4 style="text-align:center">Angle Displacements shown along a path.</h4></div><p class="css-1ftn47p">Once all splice points are found, VTracer feeds all subpaths between every consecutive pair of splice points into the curve-fitter.</p><p class="css-1ftn47p">If the smoothed path from the previous step is fed into the curve-fitter, we get a spline like the following:</p><div><img alt="Final output" style="display:block;margin-left:auto;margin-right:auto;max-width:100%;height:200px" src="/public/vtracer/PipelineShowcase/Curve-fitted.png"/><h4 style="text-align:center">Final output</h4></div><h2 id="vs-potrace"><a href="#vs-potrace" class="css-1r0pe6c">vs Potrace</a></h2><h3 id="fidelity"><a href="#fidelity" class="css-1r0pe6c">Fidelity</a></h3><p class="css-1ftn47p"><a href="http://potrace.sourceforge.net/" class="css-1iv9jyz">Potrace</a> is a popular bitmap tracing tool that also transforms bitmaps into vector graphics. Being able to produce high-quality output for low-resolution images, Potrace traces images by finding global optimal under certain assumptions. VTracer favours fidelity over simplification. Potrace and VTracer produce different results especially on small objects.</p><div><img alt="" style="display:block;margin-left:auto;margin-right:auto;max-width:100%" src="/public/vtracer/VSPotraceCorner.svg"/><h4 style="text-align:center"></h4></div><h6 style="text-align:center"><p class="css-1ftn47p">Illustration of how assumptions affect tracing.
<br/>
Left: Original input.
<br/>
Middle: Possible shape interpretation with the assumption that ambiguous “corners” in the original input are sharp corners.
<br/>Right: Possible shape interpretation with no assumptions: “corners” in the original image are represented by curves or round corners.</p></h6><h3 id="efficiency"><a href="#efficiency" class="css-1r0pe6c">Efficiency</a></h3><p class="css-1ftn47p">Potrace finds the global optimal way of tracing a shape, meaning it approximates parts using information from the entire shape, which leads to performance issues in high-resolution images. On the other hand, VTracer runs a linear algorithm on each cluster and has lower CPU and memory usage. In fact, we regularly use VTracer to process high resolution scans at 10 megapixels.</p><h2 id="vs-adobe-illustrator"><a href="#vs-adobe-illustrator" class="css-1r0pe6c">vs Adobe Illustrator</a></h2><p class="css-1ftn47p">Comparing to Adobe Illustrator&#x27;s Live Trace, VTracer&#x27;s output is much more compact thanks to a stacking strategy. VTracer&#x27;s preprocessing stage utilizes Vision Cortex&#x27;s image tree algorithm and never produces shapes with holes.</p></div></div></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/vtracer-docs";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-de232d11035408152ab7.js"],"app":["/app-76f37d058ac6c3e6c0d8.js"],"component---src-index-mdx":["/component---src-index-mdx-2aa340e70063b4417e5e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5955086a4c9d951ffc59.js"],"component---src-visionmagic-mdx":["/component---src-visionmagic-mdx-2bbadb0bec805755b1e9.js"],"component---src-vtracer-mdx":["/component---src-vtracer-mdx-2f51e6f43818e33d2993.js"]};/*]]>*/</script><script src="/polyfill-de232d11035408152ab7.js" nomodule=""></script><script src="/component---src-vtracer-mdx-2f51e6f43818e33d2993.js" async=""></script><script src="/75b245e2560a13d21dd9b367f0f8c652b7b16a7e-895bfcfd26b488df2b54.js" async=""></script><script src="/798c9f31-11ec63aee89ef2c90abe.js" async=""></script><script src="/app-76f37d058ac6c3e6c0d8.js" async=""></script><script src="/framework-d7536238104105a65bbe.js" async=""></script><script src="/styles-755093da0c07f4b49226.js" async=""></script><script src="/webpack-runtime-c42aa0034dd9b647ccba.js" async=""></script></body></html>